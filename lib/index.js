!function(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e(require("d3")):"function"==typeof define&&define.amd?define(["d3"],e):"object"==typeof exports?exports.$chart=e(require("d3")):t.$chart=e(t.d3)}(window,function(t){return function(t){var e={};function r(n){if(e[n])return e[n].exports;var a=e[n]={i:n,l:!1,exports:{}};return t[n].call(a.exports,a,a.exports,r),a.l=!0,a.exports}return r.m=t,r.c=e,r.d=function(t,e,n){r.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:n})},r.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},r.t=function(t,e){if(1&e&&(t=r(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(r.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var a in t)r.d(n,a,function(e){return t[e]}.bind(null,a));return n},r.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return r.d(e,"a",e),e},r.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},r.p="",r(r.s=1)}([function(e,r){e.exports=t},function(t,e,r){"use strict";r.r(e);var n=r(0);function a(t,e,r){return(a=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(t){return!1}}()?Reflect.construct:function(t,e,r){var n=[null];n.push.apply(n,e);var a=new(Function.bind.apply(t,n));return r&&i(a,r.prototype),a}).apply(null,arguments)}function i(t,e){return(i=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function o(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}var l=function(){function t(e,r){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this._dom=e,this._data=r,this._width=e.clientWidth,this._height=e.clientHeight,this._isHorizontal=!1,this._x={},this._y={},this._shape="",this._colorScale=void 0}var e,r,a;return e=t,(r=[{key:"bar",value:function(t){var e=t.x,r=t.y,n=t.xType,a=void 0===n?"category":n,i=t.yFormat,o=void 0===i?"normal":i;this._x={key:e,type:a},this._y={key:r,type:"measure",format:o};var l=r.split("|").length>1,c=r.split("+").length>1;return l?(this._shape="grouped bar",this._y.key=r.split("|")):c?(this._shape="stacked bar",this._y.key=r.split("+")):this._shape="bar",this}},{key:"transpose",value:function(){return this._isHorizontal=!0,this}},{key:"color",value:function(t,e){return Array.isArray(t)&&Array.isArray(e)&&t.length===e.length?this._colorScale=n.scaleOrdinal().domain(t).range(e):this._colorScale=n.scaleOrdinal().domain(this._data.map(function(e){return e[t]})).range(e),this}},{key:"_autoBox",value:function(){var t=this.getBBox();return[t.x,t.y,t.width,t.height]}},{key:"_drawBarChart",value:function(){var t=this,e=n.create("svg").style("max-width","100%").style("max-height","100%").style("padding","25px"),r=n.scaleBand().domain(this._data.map(function(e){return e[t._x.key]})).range(this._isHorizontal?[0,this._height]:[0,this._width]).padding(.3),a=n.scaleLinear().domain([0,1.1*n.max("grouped bar"===t._shape?t._data.reduce(function(e,r){var n=[];return t._y.key.forEach(function(t){return n.push(r[t])}),e.concat(n)},[]):"stacked bar"===t._shape?n.stack().keys(t._y.key)(t._data).map(function(t){return n.max(t,function(t){return t[1]})}):"bar"===t._shape?t._data.map(function(e){return e[t._y.key]}):void 0)]).range(this._isHorizontal?[0,this._width]:[this._height,0]);return e.append("g").call(function(e){return e.attr("transform",t._isHorizontal?"":"translate(0,".concat(t._height,")")).call(t._isHorizontal?n.axisLeft(r).tickSizeOuter(0):n.axisBottom(r).tickSizeOuter(0)).call(function(t){return t.selectAll(".tick line").remove()})}),e.append("g").call(function(e){return e.call(t._isHorizontal?n.axisTop(a).ticks(5):n.axisLeft(a).ticks(5)).call(function(t){return t.select(".domain").remove()}).call(function(t){return t.selectAll(".tick line").remove()})}).call(function(e){return e.selectAll(".tick").append("line").attr("x1",0).attr("y1",0).attr("x2",t._isHorizontal?0:t._width).attr("y2",t._isHorizontal?t._height:0).attr("stroke","black").attr("stroke-dasharray","5 5")}),e.append("g").call(function(e){if("bar"===t._shape)return e.selectAll("rect").data(t._data).join("rect").attr("x",function(e){return t._isHorizontal?1:r(e[t._x.key])}).attr("y",function(e){return t._isHorizontal?r(e[t._x.key]):a(e[t._y.key])}).attr("height",function(e){return t._isHorizontal?r.bandwidth():a(0)-a(e[t._y.key])}).attr("width",function(e){return t._isHorizontal?a(e[t._y.key]):r.bandwidth()}).attr("fill",function(e){return t._colorScale?t._colorScale(e[t._x.key]):"steelblue"});if("grouped bar"===t._shape){var i=n.scaleBand().domain(t._y.key).rangeRound([0,r.bandwidth()]).padding(.05);return e.selectAll("g").data(t._data).join("g").attr("transform",function(e){return t._isHorizontal?"translate(0, ".concat(r(e[t._x.key]),")"):"translate(".concat(r(e[t._x.key]),",0)")}).selectAll("rect").data(function(e){return t._y.key.map(function(t){return{key:t,value:e[t]}})}).join("rect").attr("x",function(e){return t._isHorizontal?1:i(e.key)}).attr("y",function(e){return t._isHorizontal?i(e.key):a(e.value)}).attr("height",function(e){return t._isHorizontal?i.bandwidth():a(0)-a(e.value)}).attr("width",function(e){return t._isHorizontal?a(e.value):i.bandwidth()}).attr("fill",function(e){return t._colorScale?t._colorScale(e.key):"steelblue"})}if("stacked bar"===t._shape){var o=n.stack().keys(t._y.key)(t._data);return e.selectAll("g").data(o).join("g").attr("fill",function(e){return t._colorScale(e.key)}).selectAll("rect").data(function(t){return t}).join("rect").attr("x",function(e){return t._isHorizontal?a(e[0]):r(e.data[t._x.key])}).attr("y",function(e){return t._isHorizontal?r(e.data[t._x.key]):a(e[1])}).attr("height",function(e){return t._isHorizontal?r.bandwidth():a(e[0])-a(e[1])}).attr("width",function(e){return t._isHorizontal?a(e[1])-a(e[0]):r.bandwidth()})}}),n.select(this._dom).append(function(){return e.node()}),e.attr("viewBox",this._autoBox),e}},{key:"_drawGroupedBarChart",value:function(){var t=this,e=n.create("svg").style("max-width","100%").style("max-height","100%").style("padding","25px"),r=n.scaleBand().domain(this._data.map(function(e){return e[t._x.key]})).range(this._isHorizontal?[0,this._height]:[0,this._width]).padding(.3),a=n.scaleLinear().domain([0,1.2*n.max(this._data,function(e){return e[t._y.key]})]).range(this._isHorizontal?[0,this._width]:[this._height,0]);return e.append("g").call(function(e){return e.attr("transform",t._isHorizontal?"":"translate(0,".concat(t._height,")")).call(t._isHorizontal?n.axisLeft(r).tickSizeOuter(0):n.axisBottom(r).tickSizeOuter(0)).call(function(t){return t.selectAll(".tick line").remove()})}),e.append("g").call(function(e){return e.call(t._isHorizontal?n.axisTop(a).ticks(5):n.axisLeft(a).ticks(5)).call(function(t){return t.select(".domain").remove()}).call(function(t){return t.selectAll(".tick line").remove()})}).call(function(e){return e.selectAll(".tick").append("line").attr("x1",0).attr("y1",0).attr("x2",t._isHorizontal?0:t._width).attr("y2",t._isHorizontal?t._height:0).attr("stroke","black").attr("stroke-dasharray","5 5")}),e.append("g").call(function(e){return e.selectAll("rect").data(t._data).join("rect").attr("x",function(e){return t._isHorizontal?1:r(e[t._x.key])}).attr("y",function(e){return t._isHorizontal?r(e[t._x.key]):a(e[t._y.key])}).attr("height",function(e){return t._isHorizontal?r.bandwidth():a(0)-a(e[t._y.key])}).attr("width",function(e){return t._isHorizontal?a(e[t._y.key]):r.bandwidth()}).attr("fill",function(e){return t._colorScale?t._colorScale(e[t._x.key]):"steelblue"})}),n.select(this._dom).append(function(){return e.node()}),e.attr("viewBox",this._autoBox),e}},{key:"render",value:function(){return this._colorScale||(this._colorScale=n.scaleOrdinal().range(n.schemeCategory10)),this._svg=this._drawBarChart(),this}}])&&o(e.prototype,r),a&&o(e,a),t}();e.default=function(){for(var t=arguments.length,e=new Array(t),r=0;r<t;r++)e[r]=arguments[r];return a(l,e)}}]).default});
//# sourceMappingURL=index.js.map